name: 3-Day Check In

# æ¯ 3 å¤©å‡Œæ™¨ 3 ç‚¹ï¼ˆåŒ—äº¬æ—¶é—´ï¼‰è‡ªåŠ¨ç­¾åˆ°ï¼Œé‡ç½® 7 å¤©è®¡æ—¶
# Every 3 days at 3:00 AM (Beijing Time)

on:
  schedule:
    # æ¯ 3 å¤©è¿è¡Œä¸€æ¬¡ï¼ˆåŒ—äº¬æ—¶é—´å‡Œæ™¨ 3 ç‚¹ï¼‰
    # UTC æ—¶é—´ï¼šå‰ä¸€å¤© 19:00
    - cron: '0 19 */3 * *'

  workflow_dispatch:  # æ”¯æŒæ‰‹åŠ¨è§¦å‘

jobs:
  checkin:
    runs-on: ubuntu-latest
    permissions:
      actions: write
      contents: read
    steps:
      - name: Delete all workflow runs
        uses: Mattraks/delete-workflow-runs@v2
        with:
          token: ${{ github.token }}
          repository: ${{ github.repository }}
          retain_days: 0
          keep_minimum_runs: 0
          delete_workflow_by_state_pattern: "ALL"
          delete_run_by_conclusion_pattern: "ALL"

      - name: Confirm check-in
        run: |
          echo "âœ… 3-Day Check-In completed!"
          echo "ğŸ“… 7-day timer has been reset"
          echo "ğŸ”„ 'Get Hot News' workflow will continue running"
          echo ""
          echo "Next check-in: Every 3 days at 3:00 AM (Beijing Time)"
          echo "For example: Feb 26, Mar 1, Mar 4, Mar 7, ..."
